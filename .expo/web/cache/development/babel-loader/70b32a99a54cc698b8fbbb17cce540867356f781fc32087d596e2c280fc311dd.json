{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport React, { createContext, useState } from 'react';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var AuthContext = createContext({\n  user: null,\n  loading: false,\n  signIn: function () {\n    var _signIn = _asyncToGenerator(function* () {});\n    function signIn() {\n      return _signIn.apply(this, arguments);\n    }\n    return signIn;\n  }(),\n  signOut: function signOut() {},\n  changePassword: function () {\n    var _changePassword = _asyncToGenerator(function* () {});\n    function changePassword() {\n      return _changePassword.apply(this, arguments);\n    }\n    return changePassword;\n  }()\n});\nexport var AuthProvider = function AuthProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    user = _useState2[0],\n    setUser = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  var signIn = function () {\n    var _ref2 = _asyncToGenerator(function* (rollNo, password) {\n      setLoading(true);\n      yield new Promise(function (r) {\n        return setTimeout(r, 600);\n      });\n      var role = rollNo.toLowerCase().startsWith('a') ? 'admin' : 'student';\n      setUser({\n        rollNo: rollNo,\n        name: 'User ' + rollNo,\n        role: role\n      });\n      setLoading(false);\n    });\n    return function signIn(_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var signOut = function signOut() {\n    return setUser(null);\n  };\n  var changePassword = function () {\n    var _ref3 = _asyncToGenerator(function* (oldP, newP) {\n      yield new Promise(function (r) {\n        return setTimeout(r, 500);\n      });\n    });\n    return function changePassword(_x3, _x4) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  return _jsx(AuthContext.Provider, {\n    value: {\n      user: user,\n      loading: loading,\n      signIn: signIn,\n      signOut: signOut,\n      changePassword: changePassword\n    },\n    children: children\n  });\n};","map":{"version":3,"names":["React","createContext","useState","jsx","_jsx","AuthContext","user","loading","signIn","_signIn","_asyncToGenerator","apply","arguments","signOut","changePassword","_changePassword","AuthProvider","_ref","children","_useState","_useState2","_slicedToArray","setUser","_useState3","_useState4","setLoading","_ref2","rollNo","password","Promise","r","setTimeout","role","toLowerCase","startsWith","name","_x","_x2","_ref3","oldP","newP","_x3","_x4","Provider","value"],"sources":["C:/Users/sumanth/Downloads/app/src/auth/AuthContext.tsx"],"sourcesContent":["import React, { createContext, useState, ReactNode } from 'react';\r\n\r\ntype User = {\r\n  rollNo: string;\r\n  name: string;\r\n  role: 'admin' | 'student';\r\n};\r\n\r\ntype AuthContextType = {\r\n  user: User | null;\r\n  loading: boolean;\r\n  signIn: (rollNo: string, password: string) => Promise<void>;\r\n  signOut: () => void;\r\n  changePassword: (oldP: string, newP: string) => Promise<void>;\r\n};\r\n\r\nexport const AuthContext = createContext<AuthContextType>({\r\n  user: null,\r\n  loading: false,\r\n  signIn: async () => {},\r\n  signOut: () => {},\r\n  changePassword: async () => {}\r\n});\r\n\r\nexport const AuthProvider = ({ children }: { children: ReactNode }) => {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Mock sign-in: roll numbers starting with A are admins\r\n  const signIn = async (rollNo: string, password: string) => {\r\n    setLoading(true);\r\n    await new Promise((r) => setTimeout(r, 600));\r\n    const role = rollNo.toLowerCase().startsWith('a') ? 'admin' : 'student';\r\n    setUser({ rollNo, name: 'User ' + rollNo, role });\r\n    setLoading(false);\r\n  };\r\n\r\n  const signOut = () => setUser(null);\r\n\r\n  const changePassword = async (oldP: string, newP: string) => {\r\n    await new Promise((r) => setTimeout(r, 500));\r\n    // no-op for mock\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, loading, signIn, signOut, changePassword }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,QAAQ,QAAmB,OAAO;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAgBlE,OAAO,IAAMC,WAAW,GAAGJ,aAAa,CAAkB;EACxDK,IAAI,EAAE,IAAI;EACVC,OAAO,EAAE,KAAK;EACdC,MAAM;IAAA,IAAAC,OAAA,GAAAC,iBAAA,CAAE,aAAY,CAAC,CAAC;IAAA,SAAtBF,MAAMA,CAAA;MAAA,OAAAC,OAAA,CAAAE,KAAA,OAAAC,SAAA;IAAA;IAAA,OAANJ,MAAM;EAAA,GAAgB;EACtBK,OAAO,EAAE,SAATA,OAAOA,CAAA,EAAQ,CAAC,CAAC;EACjBC,cAAc;IAAA,IAAAC,eAAA,GAAAL,iBAAA,CAAE,aAAY,CAAC,CAAC;IAAA,SAA9BI,cAAcA,CAAA;MAAA,OAAAC,eAAA,CAAAJ,KAAA,OAAAC,SAAA;IAAA;IAAA,OAAdE,cAAc;EAAA;AAChB,CAAC,CAAC;AAEF,OAAO,IAAME,YAAY,GAAG,SAAfA,YAAYA,CAAAC,IAAA,EAA8C;EAAA,IAAxCC,QAAQ,GAAAD,IAAA,CAARC,QAAQ;EACrC,IAAAC,SAAA,GAAwBjB,QAAQ,CAAc,IAAI,CAAC;IAAAkB,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAA5Cb,IAAI,GAAAc,UAAA;IAAEE,OAAO,GAAAF,UAAA;EACpB,IAAAG,UAAA,GAA8BrB,QAAQ,CAAC,KAAK,CAAC;IAAAsB,UAAA,GAAAH,cAAA,CAAAE,UAAA;IAAtChB,OAAO,GAAAiB,UAAA;IAAEC,UAAU,GAAAD,UAAA;EAG1B,IAAMhB,MAAM;IAAA,IAAAkB,KAAA,GAAAhB,iBAAA,CAAG,WAAOiB,MAAc,EAAEC,QAAgB,EAAK;MACzDH,UAAU,CAAC,IAAI,CAAC;MAChB,MAAM,IAAII,OAAO,CAAC,UAACC,CAAC;QAAA,OAAKC,UAAU,CAACD,CAAC,EAAE,GAAG,CAAC;MAAA,EAAC;MAC5C,IAAME,IAAI,GAAGL,MAAM,CAACM,WAAW,CAAC,CAAC,CAACC,UAAU,CAAC,GAAG,CAAC,GAAG,OAAO,GAAG,SAAS;MACvEZ,OAAO,CAAC;QAAEK,MAAM,EAANA,MAAM;QAAEQ,IAAI,EAAE,OAAO,GAAGR,MAAM;QAAEK,IAAI,EAAJA;MAAK,CAAC,CAAC;MACjDP,UAAU,CAAC,KAAK,CAAC;IACnB,CAAC;IAAA,gBANKjB,MAAMA,CAAA4B,EAAA,EAAAC,GAAA;MAAA,OAAAX,KAAA,CAAAf,KAAA,OAAAC,SAAA;IAAA;EAAA,GAMX;EAED,IAAMC,OAAO,GAAG,SAAVA,OAAOA,CAAA;IAAA,OAASS,OAAO,CAAC,IAAI,CAAC;EAAA;EAEnC,IAAMR,cAAc;IAAA,IAAAwB,KAAA,GAAA5B,iBAAA,CAAG,WAAO6B,IAAY,EAAEC,IAAY,EAAK;MAC3D,MAAM,IAAIX,OAAO,CAAC,UAACC,CAAC;QAAA,OAAKC,UAAU,CAACD,CAAC,EAAE,GAAG,CAAC;MAAA,EAAC;IAE9C,CAAC;IAAA,gBAHKhB,cAAcA,CAAA2B,GAAA,EAAAC,GAAA;MAAA,OAAAJ,KAAA,CAAA3B,KAAA,OAAAC,SAAA;IAAA;EAAA,GAGnB;EAED,OACER,IAAA,CAACC,WAAW,CAACsC,QAAQ;IAACC,KAAK,EAAE;MAAEtC,IAAI,EAAJA,IAAI;MAAEC,OAAO,EAAPA,OAAO;MAAEC,MAAM,EAANA,MAAM;MAAEK,OAAO,EAAPA,OAAO;MAAEC,cAAc,EAAdA;IAAe,CAAE;IAAAI,QAAA,EAC7EA;EAAQ,CACW,CAAC;AAE3B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}