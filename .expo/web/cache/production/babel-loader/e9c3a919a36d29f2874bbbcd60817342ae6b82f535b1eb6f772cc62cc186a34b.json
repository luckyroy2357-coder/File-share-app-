{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import React,{createContext,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";export var AuthContext=createContext({user:null,loading:false,signIn:function(){var _signIn=_asyncToGenerator(function*(){});function signIn(){return _signIn.apply(this,arguments);}return signIn;}(),signOut:function signOut(){},changePassword:function(){var _changePassword=_asyncToGenerator(function*(){});function changePassword(){return _changePassword.apply(this,arguments);}return changePassword;}()});export var AuthProvider=function AuthProvider(_ref){var children=_ref.children;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var signIn=function(){var _ref2=_asyncToGenerator(function*(rollNo,password){setLoading(true);yield new Promise(function(r){return setTimeout(r,600);});var role=rollNo.toLowerCase().startsWith('a')?'admin':'student';setUser({rollNo:rollNo,name:'User '+rollNo,role:role});setLoading(false);});return function signIn(_x,_x2){return _ref2.apply(this,arguments);};}();var signOut=function signOut(){return setUser(null);};var changePassword=function(){var _ref3=_asyncToGenerator(function*(oldP,newP){yield new Promise(function(r){return setTimeout(r,500);});});return function changePassword(_x3,_x4){return _ref3.apply(this,arguments);};}();return _jsx(AuthContext.Provider,{value:{user:user,loading:loading,signIn:signIn,signOut:signOut,changePassword:changePassword},children:children});};","map":{"version":3,"names":["React","createContext","useState","jsx","_jsx","AuthContext","user","loading","signIn","_signIn","_asyncToGenerator","apply","arguments","signOut","changePassword","_changePassword","AuthProvider","_ref","children","_useState","_useState2","_slicedToArray","setUser","_useState3","_useState4","setLoading","_ref2","rollNo","password","Promise","r","setTimeout","role","toLowerCase","startsWith","name","_x","_x2","_ref3","oldP","newP","_x3","_x4","Provider","value"],"sources":["C:/Users/sumanth/Downloads/app/src/auth/AuthContext.tsx"],"sourcesContent":["import React, { createContext, useState, ReactNode } from 'react';\r\n\r\ntype User = {\r\n  rollNo: string;\r\n  name: string;\r\n  role: 'admin' | 'student';\r\n};\r\n\r\ntype AuthContextType = {\r\n  user: User | null;\r\n  loading: boolean;\r\n  signIn: (rollNo: string, password: string) => Promise<void>;\r\n  signOut: () => void;\r\n  changePassword: (oldP: string, newP: string) => Promise<void>;\r\n};\r\n\r\nexport const AuthContext = createContext<AuthContextType>({\r\n  user: null,\r\n  loading: false,\r\n  signIn: async () => {},\r\n  signOut: () => {},\r\n  changePassword: async () => {}\r\n});\r\n\r\nexport const AuthProvider = ({ children }: { children: ReactNode }) => {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Mock sign-in: roll numbers starting with A are admins\r\n  const signIn = async (rollNo: string, password: string) => {\r\n    setLoading(true);\r\n    await new Promise((r) => setTimeout(r, 600));\r\n    const role = rollNo.toLowerCase().startsWith('a') ? 'admin' : 'student';\r\n    setUser({ rollNo, name: 'User ' + rollNo, role });\r\n    setLoading(false);\r\n  };\r\n\r\n  const signOut = () => setUser(null);\r\n\r\n  const changePassword = async (oldP: string, newP: string) => {\r\n    await new Promise((r) => setTimeout(r, 500));\r\n    // no-op for mock\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, loading, signIn, signOut, changePassword }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n"],"mappings":"wIAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,QAAQ,KAAmB,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAgBlE,MAAO,IAAM,CAAAC,WAAW,CAAGJ,aAAa,CAAkB,CACxDK,IAAI,CAAE,IAAI,CACVC,OAAO,CAAE,KAAK,CACdC,MAAM,gBAAAC,OAAA,CAAAC,iBAAA,CAAE,WAAY,CAAC,CAAC,UAAtB,CAAAF,MAAMA,CAAA,SAAAC,OAAA,CAAAE,KAAA,MAAAC,SAAA,SAAN,CAAAJ,MAAM,IAAgB,CACtBK,OAAO,CAAE,QAAT,CAAAA,OAAOA,CAAA,CAAQ,CAAC,CAAC,CACjBC,cAAc,gBAAAC,eAAA,CAAAL,iBAAA,CAAE,WAAY,CAAC,CAAC,UAA9B,CAAAI,cAAcA,CAAA,SAAAC,eAAA,CAAAJ,KAAA,MAAAC,SAAA,SAAd,CAAAE,cAAc,IAChB,CAAC,CAAC,CAEF,MAAO,IAAM,CAAAE,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAAC,IAAA,CAA8C,IAAxC,CAAAC,QAAQ,CAAAD,IAAA,CAARC,QAAQ,CACrC,IAAAC,SAAA,CAAwBjB,QAAQ,CAAc,IAAI,CAAC,CAAAkB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA5Cb,IAAI,CAAAc,UAAA,IAAEE,OAAO,CAAAF,UAAA,IACpB,IAAAG,UAAA,CAA8BrB,QAAQ,CAAC,KAAK,CAAC,CAAAsB,UAAA,CAAAH,cAAA,CAAAE,UAAA,IAAtChB,OAAO,CAAAiB,UAAA,IAAEC,UAAU,CAAAD,UAAA,IAG1B,GAAM,CAAAhB,MAAM,gBAAAkB,KAAA,CAAAhB,iBAAA,CAAG,UAAOiB,MAAc,CAAEC,QAAgB,CAAK,CACzDH,UAAU,CAAC,IAAI,CAAC,CAChB,KAAM,IAAI,CAAAI,OAAO,CAAC,SAACC,CAAC,QAAK,CAAAC,UAAU,CAACD,CAAC,CAAE,GAAG,CAAC,GAAC,CAC5C,GAAM,CAAAE,IAAI,CAAGL,MAAM,CAACM,WAAW,CAAC,CAAC,CAACC,UAAU,CAAC,GAAG,CAAC,CAAG,OAAO,CAAG,SAAS,CACvEZ,OAAO,CAAC,CAAEK,MAAM,CAANA,MAAM,CAAEQ,IAAI,CAAE,OAAO,CAAGR,MAAM,CAAEK,IAAI,CAAJA,IAAK,CAAC,CAAC,CACjDP,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,iBANK,CAAAjB,MAAMA,CAAA4B,EAAA,CAAAC,GAAA,SAAAX,KAAA,CAAAf,KAAA,MAAAC,SAAA,OAMX,CAED,GAAM,CAAAC,OAAO,CAAG,QAAV,CAAAA,OAAOA,CAAA,QAAS,CAAAS,OAAO,CAAC,IAAI,CAAC,GAEnC,GAAM,CAAAR,cAAc,gBAAAwB,KAAA,CAAA5B,iBAAA,CAAG,UAAO6B,IAAY,CAAEC,IAAY,CAAK,CAC3D,KAAM,IAAI,CAAAX,OAAO,CAAC,SAACC,CAAC,QAAK,CAAAC,UAAU,CAACD,CAAC,CAAE,GAAG,CAAC,GAAC,CAE9C,CAAC,iBAHK,CAAAhB,cAAcA,CAAA2B,GAAA,CAAAC,GAAA,SAAAJ,KAAA,CAAA3B,KAAA,MAAAC,SAAA,OAGnB,CAED,MACE,CAAAR,IAAA,CAACC,WAAW,CAACsC,QAAQ,EAACC,KAAK,CAAE,CAAEtC,IAAI,CAAJA,IAAI,CAAEC,OAAO,CAAPA,OAAO,CAAEC,MAAM,CAANA,MAAM,CAAEK,OAAO,CAAPA,OAAO,CAAEC,cAAc,CAAdA,cAAe,CAAE,CAAAI,QAAA,CAC7EA,QAAQ,CACW,CAAC,CAE3B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}