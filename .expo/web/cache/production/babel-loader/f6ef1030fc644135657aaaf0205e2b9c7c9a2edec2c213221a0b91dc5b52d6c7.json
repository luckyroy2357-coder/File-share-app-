{"ast":null,"code":"import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";var _excluded=[\"children\",\"headerConfig\",\"activityState\",\"shouldFreeze\",\"stackPresentation\",\"sheetAllowedDetents\",\"contentStyle\",\"style\",\"screenId\",\"unstable_sheetFooter\"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r]);}return n;},_extends.apply(null,arguments);}import*as React from'react';import Platform from\"react-native-web/dist/exports/Platform\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import warnOnce from'warn-once';import DebugContainer from\"./DebugContainer\";import{ScreenStackHeaderConfig}from\"./ScreenStackHeaderConfig\";import Screen from\"./Screen\";import ScreenStack from\"./ScreenStack\";import{RNSScreensRefContext}from\"../contexts\";import{FooterComponent}from\"./ScreenFooter\";function ScreenStackItem(_ref,ref){var _headerConfig$largeTi,_headerConfig$largeTi2;var children=_ref.children,headerConfig=_ref.headerConfig,activityState=_ref.activityState,shouldFreeze=_ref.shouldFreeze,stackPresentation=_ref.stackPresentation,sheetAllowedDetents=_ref.sheetAllowedDetents,contentStyle=_ref.contentStyle,style=_ref.style,screenId=_ref.screenId,unstable_sheetFooter=_ref.unstable_sheetFooter,rest=_objectWithoutProperties(_ref,_excluded);var currentScreenRef=React.useRef(null);var screenRefs=React.useContext(RNSScreensRefContext);React.useImperativeHandle(ref,function(){return currentScreenRef.current;});var isHeaderInModal=Platform.OS==='android'?false:stackPresentation!=='push'&&(headerConfig==null?void 0:headerConfig.hidden)===false;var headerHiddenPreviousRef=React.useRef(headerConfig==null?void 0:headerConfig.hidden);React.useEffect(function(){warnOnce(Platform.OS!=='android'&&stackPresentation!=='push'&&headerHiddenPreviousRef.current!==(headerConfig==null?void 0:headerConfig.hidden),\"Dynamically changing header's visibility in modals will result in remounting the screen and losing all local state.\");headerHiddenPreviousRef.current=headerConfig==null?void 0:headerConfig.hidden;},[headerConfig==null?void 0:headerConfig.hidden,stackPresentation]);var content=React.createElement(React.Fragment,null,React.createElement(DebugContainer,{style:[stackPresentation==='formSheet'?Platform.OS==='ios'?styles.absolute:sheetAllowedDetents==='fitToContents'?null:styles.container:styles.container,contentStyle],stackPresentation:stackPresentation!=null?stackPresentation:'push'},children),React.createElement(ScreenStackHeaderConfig,headerConfig),stackPresentation==='formSheet'&&unstable_sheetFooter&&React.createElement(FooterComponent,null,unstable_sheetFooter()));var internalScreenStyle;if(stackPresentation==='formSheet'&&contentStyle){var flattenContentStyles=StyleSheet.flatten(contentStyle);internalScreenStyle={backgroundColor:flattenContentStyles==null?void 0:flattenContentStyles.backgroundColor};}return React.createElement(Screen,_extends({ref:function ref(node){currentScreenRef.current=node;if(screenRefs===null){console.warn('Looks like RNSScreensRefContext is missing. Make sure the ScreenStack component is wrapped in it');return;}var currentRefs=screenRefs.current;if(node===null){delete currentRefs[screenId];}else{currentRefs[screenId]={current:node};}},enabled:true,isNativeStack:true,activityState:activityState,shouldFreeze:shouldFreeze,screenId:screenId,stackPresentation:stackPresentation,hasLargeHeader:(_headerConfig$largeTi=headerConfig==null?void 0:headerConfig.largeTitle)!=null?_headerConfig$largeTi:false,sheetAllowedDetents:sheetAllowedDetents,style:[style,internalScreenStyle]},rest),isHeaderInModal?React.createElement(ScreenStack,{style:styles.container},React.createElement(Screen,{enabled:true,isNativeStack:true,activityState:activityState,shouldFreeze:shouldFreeze,hasLargeHeader:(_headerConfig$largeTi2=headerConfig==null?void 0:headerConfig.largeTitle)!=null?_headerConfig$largeTi2:false,style:StyleSheet.absoluteFill},content)):content);}export default React.forwardRef(ScreenStackItem);var styles=StyleSheet.create({container:{flex:1},absolute:{position:'absolute',top:0,start:0,end:0}});","map":{"version":3,"names":["React","Platform","StyleSheet","warnOnce","DebugContainer","ScreenStackHeaderConfig","Screen","ScreenStack","RNSScreensRefContext","FooterComponent","ScreenStackItem","_ref","ref","_headerConfig$largeTi","_headerConfig$largeTi2","children","headerConfig","activityState","shouldFreeze","stackPresentation","sheetAllowedDetents","contentStyle","style","screenId","unstable_sheetFooter","rest","_objectWithoutProperties","_excluded","currentScreenRef","useRef","screenRefs","useContext","useImperativeHandle","current","isHeaderInModal","OS","hidden","headerHiddenPreviousRef","useEffect","content","createElement","Fragment","styles","absolute","container","internalScreenStyle","flattenContentStyles","flatten","backgroundColor","_extends","node","console","warn","currentRefs","enabled","isNativeStack","hasLargeHeader","largeTitle","absoluteFill","forwardRef","create","flex","position","top","start","end"],"sources":["C:\\Users\\sumanth\\Downloads\\app\\node_modules\\react-native-screens\\src\\components\\ScreenStackItem.tsx"],"sourcesContent":["import * as React from 'react';\nimport {\n  Platform,\n  type StyleProp,\n  StyleSheet,\n  type ViewStyle,\n  View,\n} from 'react-native';\nimport warnOnce from 'warn-once';\n\nimport DebugContainer from './DebugContainer';\nimport { ScreenProps, ScreenStackHeaderConfigProps } from '../types';\nimport { ScreenStackHeaderConfig } from './ScreenStackHeaderConfig';\nimport Screen from './Screen';\nimport ScreenStack from './ScreenStack';\nimport { RNSScreensRefContext } from '../contexts';\nimport { FooterComponent } from './ScreenFooter';\n\ntype Props = Omit<\n  ScreenProps,\n  'enabled' | 'isNativeStack' | 'hasLargeHeader'\n> & {\n  screenId: string;\n  headerConfig?: ScreenStackHeaderConfigProps;\n  contentStyle?: StyleProp<ViewStyle>;\n};\n\nfunction ScreenStackItem(\n  {\n    children,\n    headerConfig,\n    activityState,\n    shouldFreeze,\n    stackPresentation,\n    sheetAllowedDetents,\n    contentStyle,\n    style,\n    screenId,\n    // eslint-disable-next-line camelcase\n    unstable_sheetFooter,\n    ...rest\n  }: Props,\n  ref: React.ForwardedRef<View>,\n) {\n  const currentScreenRef = React.useRef<View | null>(null);\n  const screenRefs = React.useContext(RNSScreensRefContext);\n\n  React.useImperativeHandle(ref, () => currentScreenRef.current!);\n\n  const isHeaderInModal =\n    Platform.OS === 'android'\n      ? false\n      : stackPresentation !== 'push' && headerConfig?.hidden === false;\n\n  const headerHiddenPreviousRef = React.useRef(headerConfig?.hidden);\n\n  React.useEffect(() => {\n    warnOnce(\n      Platform.OS !== 'android' &&\n        stackPresentation !== 'push' &&\n        headerHiddenPreviousRef.current !== headerConfig?.hidden,\n      `Dynamically changing header's visibility in modals will result in remounting the screen and losing all local state.`,\n    );\n\n    headerHiddenPreviousRef.current = headerConfig?.hidden;\n  }, [headerConfig?.hidden, stackPresentation]);\n\n  const content = (\n    <>\n      <DebugContainer\n        style={[\n          stackPresentation === 'formSheet'\n            ? Platform.OS === 'ios'\n              ? styles.absolute\n              : sheetAllowedDetents === 'fitToContents'\n              ? null\n              : styles.container\n            : styles.container,\n          contentStyle,\n        ]}\n        stackPresentation={stackPresentation ?? 'push'}>\n        {children}\n      </DebugContainer>\n      {/**\n       * `HeaderConfig` needs to be the direct child of `Screen` without any intermediate `View`\n       * We don't render it conditionally based on visibility to make it possible to dynamically render a custom `header`\n       * Otherwise dynamically rendering a custom `header` leaves the native header visible\n       *\n       * https://github.com/software-mansion/react-native-screens/blob/main/guides/GUIDE_FOR_LIBRARY_AUTHORS.md#screenstackheaderconfig\n       *\n       * HeaderConfig must not be first child of a Screen.\n       * See https://github.com/software-mansion/react-native-screens/pull/1825\n       * for detailed explanation.\n       */}\n      <ScreenStackHeaderConfig {...headerConfig} />\n      {/* eslint-disable-next-line camelcase */}\n      {stackPresentation === 'formSheet' && unstable_sheetFooter && (\n        <FooterComponent>{unstable_sheetFooter()}</FooterComponent>\n      )}\n    </>\n  );\n\n  // We take backgroundColor from contentStyle and apply it on Screen.\n  // This allows to workaround one issue with truncated\n  // content with formSheet presentation.\n  let internalScreenStyle;\n\n  if (stackPresentation === 'formSheet' && contentStyle) {\n    const flattenContentStyles = StyleSheet.flatten(contentStyle);\n    internalScreenStyle = {\n      backgroundColor: flattenContentStyles?.backgroundColor,\n    };\n  }\n\n  return (\n    <Screen\n      ref={node => {\n        currentScreenRef.current = node;\n\n        if (screenRefs === null) {\n          console.warn(\n            'Looks like RNSScreensRefContext is missing. Make sure the ScreenStack component is wrapped in it',\n          );\n          return;\n        }\n\n        const currentRefs = screenRefs.current;\n\n        if (node === null) {\n          // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n          delete currentRefs[screenId];\n        } else {\n          currentRefs[screenId] = { current: node };\n        }\n      }}\n      enabled\n      isNativeStack\n      activityState={activityState}\n      shouldFreeze={shouldFreeze}\n      screenId={screenId}\n      stackPresentation={stackPresentation}\n      hasLargeHeader={headerConfig?.largeTitle ?? false}\n      sheetAllowedDetents={sheetAllowedDetents}\n      style={[style, internalScreenStyle]}\n      {...rest}>\n      {isHeaderInModal ? (\n        <ScreenStack style={styles.container}>\n          <Screen\n            enabled\n            isNativeStack\n            activityState={activityState}\n            shouldFreeze={shouldFreeze}\n            hasLargeHeader={headerConfig?.largeTitle ?? false}\n            style={StyleSheet.absoluteFill}>\n            {content}\n          </Screen>\n        </ScreenStack>\n      ) : (\n        content\n      )}\n    </Screen>\n  );\n}\n\nexport default React.forwardRef(ScreenStackItem);\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  absolute: {\n    position: 'absolute',\n    top: 0,\n    start: 0,\n    end: 0,\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}